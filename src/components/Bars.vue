<template>
  <ul class="t-bars">
    <li class="t-bar" v-for="poem in poemBars" :key="poem.id">
      <router-link class="t-bar__link" :to="`/poem/${poem.id}`">{{ poem.title }}</router-link>
      &nbsp;
      <span class="t-bar__delimeter">..</span>
      &nbsp;
      <small class="t-bar__author">{{ poem.author }}</small>
    </li>
  </ul>
</template>

<script>
export default {
  name: "Bars",
  data() {
    return {
      bars: [],
      barsLength: 3
    };
  },

  props: {
    type: String,
    poems: Array
  },

  computed: {
    poemBars() {
      if (this.poems && this.poems.length <= this.barsLength) {
        return this.poems;
      } else {
        return this.getRandomPoems(this.poems, this.barsLength);
      }
    }
  },

  methods: {
    getRandomPoems(arr, num) {
      const bars = [];

      while (bars.length < num) {
        const el = arr[Math.floor(Math.random() * arr.length)];
        bars.indexOf(el) === -1 ? bars.push(el) : null;
      }
      return bars;
    }
  }
};
</script>

<style lang="scss" scoped>
.t-bars {
  margin: 0;
  padding: 10px;
  list-style: none;
  background-color: #fff;
}

.t-bar {
  position: relative;
  display: flex;
  justify-content: space-between;

  &__delimeter {
    position: absolute;
    left: 50%;
  }

  &__link {
    color: #535251;
  }
}
</style>
